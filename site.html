<!DOCTYPE html>
<html>

<head>
	<script>
		//TODO Ver si este es el mejor lugar para poner la funcion. (Creo que si, porque se ejecuta desde un boton)
		function searchUsers() {
			var xhttp = new XMLHttpRequest();
			xhttp.onreadystatechange = function() {
				if (xhttp.readyState == 4 && xhttp.status == 200) {
				  var json = JSON.parse(xhttp.responseText);
				  var selUser = document.getElementById("searchText").value
				  var result = 'No matching person';
				  //TODO 'Encapsularlo' en funcion
				  for(i=0; i<json.length;i++) {
					  var curPerson = json[i];
					  //TODO Considerar usar localeCompare
					  if (curPerson.username == selUser) {
						  result = curPerson.first_name;
					  }
				  }
				  document.getElementById("id").innerHTML = result;
				}
			}
			//TODO Por que estos parametros?
			xhttp.open("GET", "users.json", true);
			xhttp.send();
		}
		
	</script>
</head>

<body>

<h2>People Profiles</h2>

<table>
<tr>
    <th><input type="text" id="searchText"><input type="text" style="display:block" value="Hola!"></th>
    <th><button type="button" onclick="searchUsers()">Search</button></th>
 </tr>

</table>

<table>
	<tr>
	 <th>Id:</th>
	 <th id="id"></th>
	</tr>
	
	<tr>
	 <th>First Name:</th>
	 <th id="firstName"></th>
	</tr>
	
	<tr>
	 <th>Last Name:</th>
	 <th id="lastName"></th>
	</tr>
	
	<tr>
	 <th>User Name:</th>
	 <th id="userName"></th>
	</tr>
	
</table>
<!--{"id":217,"first_name":"Stephanie","last_name":"Webb","username":"swebb0","email":"swebb0@cmu.edu","city":"Awb\u0101r\u012b","country":"Libya","fav_color":"#b7d69f","blog":"http://phoca.cz/vestibulum/sed.png?in=nec&congue=nisi&etiam=volutpat&justo=eleifend&etiam=donec&pretium=ut&iaculis=dolor&justo=morbi&in=vel&hac=lectus&habitasse=in&platea=quam&dictumst=fringilla&etiam=rhoncus&faucibus=mauris&cursus=enim&urna=leo&ut=rhoncus&tellus=sed&nulla=vestibulum&ut=sit&erat=amet&id=cursus&mauris=id&vulputate=turpis&elementum=integer&nullam=aliquet&varius=massa&nulla=id&facilisi=lobortis&cras=convallis&non=tortor&velit=risus&nec=dapibus&nisi=augue&vulputate=vel&nonummy=accumsan&maecenas=tellus&tincidunt=nisi&lacus=eu&at=orci&velit=mauris&vivamus=lacinia&vel=sapien&nulla=quis&eget=libero&eros=nullam&elementum=sit&pellentesque=amet&quisque=turpis&porta=elementum&volutpat=ligula&erat=vehicula&quisque=consequat&erat=morbi&eros=a&viverra=ipsum&eget=integer&congue=a&eget=nibh&semper=in&rutrum=quis&nulla=justo&nunc=maecenas&purus=rhoncus&phasellus=aliquam&in=lacus&felis=morbi&donec=quis","title":"Sr"}-->




</body>
</html>
