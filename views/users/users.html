<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">

<head>
	<script src="../../model/users.js" type="text/javascript"></script>
	<script src="../../controllers/usersController.js" type="text/javascript"></script>
	<script>
		function searchUsers() {
			var selUser = document.getElementById("searchText").value
			UsersController.search(selUser, populateSearchResult);
		}
		
		function populateSearchResult(result, error) {
			if (error != null && error != '') {
				document.getElementById("error").innerHTML = error;
				
				document.getElementById("id").innerHTML = '';
				document.getElementById("firstName").innerHTML = '';
			} else {
				document.getElementById("error").innerHTML = '';
				
				document.getElementById("id").innerHTML = result.id;
				document.getElementById("firstName").innerHTML = result.first_name;
			}
		}
		
		function newUserEntered() {
			var enteredUser = document.getElementById("searchText").value;
			UsersController.suggest(enteredUser, promptSuggestions);
		}
		
		function promptSuggestions(suggestions) {
			if (suggestions != null) {
				var listSugHTML = '';
				listSugHTML += '<ul style="list-style: none; margin: 0; padding: 0;">';
				for(i=0; i<suggestions.length; i++) {
					listSugHTML += '<li id="sug' + i + '">' + suggestions[i] + '</li>';
				}
				listSugHTML += '</ul>';
				document.getElementById("suggestions").style = "display:block; position:absolute; background:white; border-style:solid; border-width:thin;";
				document.getElementById("suggestions").innerHTML = listSugHTML;
			}
		}
	</script>
</head>

<body>

<h2>People Profiles</h2>

<table>
<tr>
    <th><input type="text" id="searchText" onKeyUp="newUserEntered()"><div id="suggestions" style="display:none; position:absolute"></th>
    <th><button type="button" onclick="searchUsers()">Search</button></th>
 </tr>

</table>

<table>
	<tr>
	 <th id="error"></th>
	</tr>
	<tr>
	 <th>Id:</th>
	 <th id="id"></th>
	</tr>
	
	<tr>
	 <th>First Name:</th>
	 <th id="firstName"></th>
	</tr>
	
	<tr>
	 <th>Last Name:</th>
	 <th id="lastName"></th>
	</tr>
	
	<tr>
	 <th>User Name:</th>
	 <th id="userName"></th>
	</tr>
	
</table>
<!--{"id":217,"first_name":"Stephanie","last_name":"Webb","username":"swebb0","email":"swebb0@cmu.edu","city":"Awb\u0101r\u012b","country":"Libya","fav_color":"#b7d69f","blog":"http://phoca.cz/vestibulum/sed.png?in=nec&congue=nisi&etiam=volutpat&justo=eleifend&etiam=donec&pretium=ut&iaculis=dolor&justo=morbi&in=vel&hac=lectus&habitasse=in&platea=quam&dictumst=fringilla&etiam=rhoncus&faucibus=mauris&cursus=enim&urna=leo&ut=rhoncus&tellus=sed&nulla=vestibulum&ut=sit&erat=amet&id=cursus&mauris=id&vulputate=turpis&elementum=integer&nullam=aliquet&varius=massa&nulla=id&facilisi=lobortis&cras=convallis&non=tortor&velit=risus&nec=dapibus&nisi=augue&vulputate=vel&nonummy=accumsan&maecenas=tellus&tincidunt=nisi&lacus=eu&at=orci&velit=mauris&vivamus=lacinia&vel=sapien&nulla=quis&eget=libero&eros=nullam&elementum=sit&pellentesque=amet&quisque=turpis&porta=elementum&volutpat=ligula&erat=vehicula&quisque=consequat&erat=morbi&eros=a&viverra=ipsum&eget=integer&congue=a&eget=nibh&semper=in&rutrum=quis&nulla=justo&nunc=maecenas&purus=rhoncus&phasellus=aliquam&in=lacus&felis=morbi&donec=quis","title":"Sr"}-->




</body>
</html>
